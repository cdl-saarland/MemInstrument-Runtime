#include <stddef.h>
#include <stdint.h>
#include "config.h"

// supported object sizes for region based heap allocation (bigger sizes use original glibc functions)
#ifdef POW_2_SIZES
size_t sizes[NUM_REGIONS] = {16, 32, 64, 128, 256, 512, 1024, 2048, 4096,
                             8192, 16384, 32768, 65536, 131072, 262144,
                             524288, 1048576, 2097152, 4194304, 8388608,
                             16777216, 33554432, 67108864, 134217728,
                             268435456, 536870912, 1073741824};
#else
size_t sizes[NUM_REGIONS] = {16, 32, 48, 64, 80, 96, 112, 128, 144, 160,
                             176, 192, 208, 224, 240, 256, 272, 288, 304, 320,
                             336, 352, 368, 384, 400, 416, 432, 448, 464, 480,
                             496, 512, 528, 544, 560, 576, 592, 608, 624, 640,
                             656, 672, 688, 704, 720, 736, 752, 768, 784, 800,
                             816, 832, 848, 864, 880, 896, 912, 928, 944, 960,
                             976, 992, 1008, 1024, 1040, 1056, 1072, 1088, 1104, 1120,
                             1136, 1152, 1168, 1184, 1200, 1216, 1232, 1248, 1264, 1280,
                             1296, 1312, 1328, 1344, 1360, 1376, 1392, 1408, 1424, 1440,
                             1456, 1472, 1488, 1504, 1520, 1536, 1552, 1568, 1584, 1600,
                             1616, 1632, 1648, 1664, 1680, 1696, 1712, 1728, 1744, 1760,
                             1776, 1792, 1808, 1824, 1840, 1856, 1872, 1888, 1904, 1920,
                             1936, 1952, 1968, 1984, 2000, 2016, 2032, 2048, 2064, 2080,
                             2096, 2112, 2128, 2144, 2160, 2176, 2192, 2208, 2224, 2240,
                             2256, 2272, 2288, 2304, 2320, 2336, 2352, 2368, 2384, 2400,
                             2416, 2432, 2448, 2464, 2480, 2496, 2512, 2528, 2544, 2560,
                             2576, 2592, 2608, 2624, 2640, 2656, 2672, 2688, 2704, 2720,
                             2736, 2752, 2768, 2784, 2800, 2816, 2832, 2848, 2864, 2880,
                             2896, 2912, 2928, 2944, 2960, 2976, 2992, 3008, 3024, 3040,
                             3056, 3072, 3088, 3104, 3120, 3136, 3152, 3168, 3184, 3200,
                             3216, 3232, 3248, 3264, 3280, 3296, 3312, 3328, 3344, 3360,
                             3376, 3392, 3408, 3424, 3440, 3456, 3472, 3488, 3504, 3520,
                             3536, 3552, 3568, 3584, 3600, 3616, 3632, 3648, 3664, 3680,
                             3696, 3712, 3728, 3744, 3760, 3776, 3792, 3808, 3824, 3840,
                             3856, 3872, 3888, 3904, 3920, 3936, 3952, 3968, 3984, 4000,
                             4016, 4032, 4048, 4064, 4080, 4096, 4112, 4128, 4144, 4160,
                             4176, 4192, 4208, 4224, 4240, 4256, 4272, 4288, 4304, 4320,
                             4336, 4352, 4368, 4384, 4400, 4416, 4432, 4448, 4464, 4480,
                             4496, 4512, 4528, 4544, 4560, 4576, 4592, 4608, 4624, 4640,
                             4656, 4672, 4688, 4704, 4720, 4736, 4752, 4768, 4784, 4800,
                             4816, 4832, 4848, 4864, 4880, 4896, 4912, 4928, 4944, 4960,
                             4976, 4992, 5008, 5024, 5040, 5056, 5072, 5088, 5104, 5120,
                             5136, 5152, 5168, 5184, 5200, 5216, 5232, 5248, 5264, 5280,
                             5296, 5312, 5328, 5344, 5360, 5376, 5392, 5408, 5424, 5440,
                             5456, 5472, 5488, 5504, 5520, 5536, 5552, 5568, 5584, 5600,
                             5616, 5632, 5648, 5664, 5680, 5696, 5712, 5728, 5744, 5760,
                             5776, 5792, 5808, 5824, 5840, 5856, 5872, 5888, 5904, 5920,
                             5936, 5952, 5968, 5984, 6000, 6016, 6032, 6048, 6064, 6080,
                             6096, 6112, 6128, 6144, 6160, 6176, 6192, 6208, 6224, 6240,
                             6256, 6272, 6288, 6304, 6320, 6336, 6352, 6368, 6384, 6400,
                             6416, 6432, 6448, 6464, 6480, 6496, 6512, 6528, 6544, 6560,
                             6576, 6592, 6608, 6624, 6640, 6656, 6672, 6688, 6704, 6720,
                             6736, 6752, 6768, 6784, 6800, 6816, 6832, 6848, 6864, 6880,
                             6896, 6912, 6928, 6944, 6960, 6976, 6992, 7008, 7024, 7040,
                             7056, 7072, 7088, 7104, 7120, 7136, 7152, 7168, 7184, 7200,
                             7216, 7232, 7248, 7264, 7280, 7296, 7312, 7328, 7344, 7360,
                             7376, 7392, 7408, 7424, 7440, 7456, 7472, 7488, 7504, 7520,
                             7536, 7552, 7568, 7584, 7600, 7616, 7632, 7648, 7664, 7680,
                             7696, 7712, 7728, 7744, 7760, 7776, 7792, 7808, 7824, 7840,
                             7856, 7872, 7888, 7904, 7920, 7936, 7952, 7968, 7984, 8000,
                             8016, 8032, 8048, 8064, 8080, 8096, 8112, 8128, 8144, 8160,
                             8176, 8192, 16384, 32768, 65536, 131072, 262144, 524288, 1048576, 2097152,
                             4194304, 8388608, 16777216, 33554432, 67108864, 134217728, 268435456, 536870912,
                             1073741824};
#endif

#if defined(FAST_BASE) && !defined(POW_2_SIZES)
uint64_t inv_sizes[NUM_REGIONS];

void init_inv_sizes(void) {
    for (int i = 0; i < NUM_REGIONS; i++) {
        inv_sizes[i] = UINT64_MAX / sizes[i] + 1;
    }
}
#endif